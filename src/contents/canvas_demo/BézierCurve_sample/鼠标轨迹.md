## 1. 关于绘制鼠标轨迹问题

##  2. 抛出问题：如何绘制完美的鼠标轨迹
  1. 问题1：
     - 通过 mousemove 事件获取的鼠标轨迹是离散的坐标点，且不是真实的轨迹曲线，如何通过离散坐标绘制平滑曲线？
  2. 问题2：
     - 鼠标轨迹的透明度应该是渐变的，web canvas 上并没有提供在一个 path 上做线性渐变的接口，这个效果如何实现？
  3. 问题3：
     - 鼠标轨迹的粗细也应该是渐变的，web canvas 上的单一 path 也没有提供画笔粗细渐变的接口，这个效果又如何实现？

------------------

## 3. 解决问题

###  问题一：如何通过离散坐标绘制平滑曲线？

   - 采用贝塞尔曲线就可以解决此问题
   - 贝塞尔曲线的解决方案：
      - 可以通过**控制点**来实现曲线的连续。

         > 如下图，鼠标经过 p1,p2,p3 三点，此时 p2 点和他的两个控制点 C1 和 C2 在同一直线上，整个曲线在 p2 点处就是平滑的。其数学逻辑也很简单，三点处于同一直线就意味着 p2 点在 C1 方向和 C2 方向上的斜率都相同，这样曲线就平滑了

         ![title](/api/file/getImage?fileId=643fa49e09eb7d7468853fad)

----------

### 问题二：如何在曲线上实现宽度的渐变？



 - 把路径变成形状
    - 把一段有宽度的贝塞尔曲线，看做是由两条曲线和两条直线所围成的图形；如下图所示。

      ![title](/api/file/getImage?fileId=643fa56509eb7d7468853fae)

    - 下图黑色的曲线、红色的曲线都是采用有宽度的画笔描边，这样就把路径变成了形状
       ![title](/api/file/getImage?fileId=643fa59d09eb7d7468853faf)

----------

### 问题三： 如何在曲线上实现透明度的渐变？

  - 针对一段曲线在绘制时需要将画笔透明图从 1 变为 0，我们就把这条曲线分割成 100 个曲线片段依次绘制，并且绘制这些片段时所用的透明度逐渐变化，这样就可以在视觉上实现透明度渐变的效果了。
     ![title](/api/file/getImage?fileId=643fa6a409eb7d7468853fb0)

-----------------------------------

## 4. 代码程序上的处理步骤：

      > 步骤一：过滤掉一些无效的轨迹坐标；
      > 步骤二：根据轨迹坐标计算控制点；
      > 步骤三：将所有点变换为贝塞尔曲线；
      > 步骤四：将上一步中生成的曲线拆分为较短的贝塞尔曲线，并计算每条曲线的绘制样式；
      > 步骤五：依次绘制每条贝塞尔曲线。
